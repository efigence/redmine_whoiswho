<h3><%=l(:label_bios)%></h3>

<div class="splitcontentleft" style="width: 70%;">
  <%= form_tag(bios_path, :method => :get) do %>
  <fieldset style="border: none;">
    <%= text_field_tag 'name', params[:name], :size => 137 %>
  </fieldset>
  <% end %>
  &nbsp;
</div>

<div>
  <div class="splitcontentleft" style="width: 70%;">
    <table class="bios">
      <thead><tr>
        <th></th>
        <%= sort_header_tag('users.firstname', :caption => l(:field_firstname)) %>
        <%= sort_header_tag('users.lastname', :caption => l(:field_lastname)) %>
        <%= sort_header_tag('position', :caption => l(:field_position)) %>
        <%= sort_header_tag('room', :caption => l(:field_room)) %>
        <th>Groups</th>
        <th></th>
      </tr></thead>
      <tbody class="myrows">
        <% @bios.each do |bio| %>
        <tr id="bio-<%= h(bio.id) %>" class="<%= cycle('odd', 'even') %>">
          <td><% if bio.image_file_name %>
            <%= image_tag bio.image.url(:icon), :style => "border-radius: 50%;" %>
            <% end %></td>
            <td id="name" style="vertical-align: middle; text-align: left;"><%= bio.user.firstname %></td>
            </td>
            <td style="vertical-align: middle; text-align: left; height: 32px"><%= bio.user.lastname %></td>
            <td style="vertical-align: middle; text-align: left;"><%= bio.position %></td>
            <td style="vertical-align: middle; text-align: left;"><%= bio.room %></td>
            <td style="vertical-align: middle; text-align: left;"><%= showing_user_groups(bio) %></td>
            <td class="button">
              <%= preview(bio) %>
            </td>
          </tr>
          <% end %>
        </tbody>
      </table>
      <p class="pagination"><%= pagination_links_full @bio_pages, @bio_count %></p>
    </div>

  <div class="splitcontentright" style="width: 30%;">
  </div>
</div>

<script type='text/javascript'>

  $(document).ready(function(){
    $(document).on('ajax:success', function(event, data, status, xhr) {
      $('.splitcontentright').empty().append($(data).html());
      $('.splitcontentright').fadeIn('fast');
    });
  });

</script>
